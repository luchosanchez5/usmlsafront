"use strict";(self.webpackChunkusmlsa=self.webpackChunkusmlsa||[]).push([[381],{9381:function(e,a,t){var n=t(9439),o=t(2791),i=t(9743),r=t(3486),c=t(5705),l=t(6359),s=t(9434),u=t(9042),d=t(6008),p=t(7689),m=t(8923),f=t(3589),v=t(184);a.Z=function(){var e,a,t=(0,s.v9)((function(e){return e.user})),y=t.user,h=t.token,x=(0,s.v9)((function(e){return e.tournament})),g=x.TournamentBySearch,S=(x.AllDivisionsData,x.DivisionDetails),z=x.isLoading,Z=(0,o.useContext)(u.C),N=Z.DivisionEdit,b=Z.DivisionId,j=null===y||void 0===y?void 0:y.access_token,D=(0,s.I0)(),F=(0,p.s0)(),T=g&&(null===g||void 0===g||null===(e=g.data)||void 0===e?void 0:e.length)>0?null===g||void 0===g||null===(a=g.data)||void 0===a?void 0:a.map((function(e){return{value:null===e||void 0===e?void 0:e.tournamentId,label:null===e||void 0===e?void 0:e.name}})):[],w=function(e){var a=new Date,t=e.split(":").map(Number),o=(0,n.Z)(t,2),i=o[0],r=o[1];return a.setHours(i),a.setMinutes(r),a.setSeconds(0),a.setMilliseconds(0),a.toISOString()},C=(0,c.TA)({initialValues:{divisionName:"",entryFee:null,initialDepositFee:null,maxTeams:null,divisionStatus:"",startTime:"",prize1:null,prize2:null,prize3:null,prize4:null,tournamentId:null},validationSchema:l.SX,onSubmit:function(e,a){var t={divisionName:e.divisionName,entryFee:e.entryFee,initialDepositFee:e.initialDepositFee,maxTeams:e.maxTeams,divisionStatus:e.divisionStatus,startTime:w(e.startTime),prize1:e.prize1,prize2:e.prize2,prize3:e.prize3,prize4:e.prize4,tournamentId:Number(e.tournamentId)};D(N?(0,m.hC)(b,t,j,F):(0,m.R$)(t,j,F)),a.resetForm()}}),I=C.values,A=C.handleChange,B=C.errors,E=C.handleSubmit,L=C.setValues,k=C.touched;return(0,o.useEffect)((function(){N&&S&&D((0,m.IQ)(b,j))}),[D,N,b]),(0,o.useEffect)((function(){D((0,m.p0)(h))}),[D,h]),(0,o.useEffect)((function(){if(N&&S){var e,a,t,n,o,i,r,c,l,s,u,d,p=(null===S||void 0===S||null===(e=S.data)||void 0===e?void 0:e.startTime)&&new Date(null===S||void 0===S||null===(a=S.data)||void 0===a?void 0:a.startTime).toISOString().slice(11,16);L({divisionName:(null===S||void 0===S||null===(t=S.data)||void 0===t?void 0:t.divisionName)||"",entryFee:(null===S||void 0===S||null===(n=S.data)||void 0===n?void 0:n.entryFee)||"",initialDepositFee:(null===S||void 0===S||null===(o=S.data)||void 0===o?void 0:o.initialDepositFee)||"",maxTeams:(null===S||void 0===S||null===(i=S.data)||void 0===i?void 0:i.maxTeams)||"",divisionStatus:(null===S||void 0===S||null===(r=S.data)||void 0===r?void 0:r.divisionStatus)||"",startTime:p||"",prize1:(null===S||void 0===S||null===(c=S.data)||void 0===c?void 0:c.prize1)||"",prize2:(null===S||void 0===S||null===(l=S.data)||void 0===l?void 0:l.prize2)||"",prize3:(null===S||void 0===S||null===(s=S.data)||void 0===s?void 0:s.prize3)||"",prize4:(null===S||void 0===S||null===(u=S.data)||void 0===u?void 0:u.prize4)||"",tournamentId:(null===S||void 0===S||null===(d=S.data)||void 0===d?void 0:d.tournamentId)||""})}}),[S,N,L]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"mt-3",children:[(0,v.jsx)("h4",{className:"mb-3 fw-bold",children:N?"Update Division":"Add Division"}),(0,v.jsx)("form",{onSubmit:E,children:(0,v.jsxs)(i.Z,{className:"row gy-3 row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-2",children:[(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(r.Z,{type:"text",name:"divisionName",label:"Division Name",onChange:A,value:I.divisionName,className:"form-control",touched:k.divisionName,error:B.divisionName})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(r.Z,{type:"number",name:"entryFee",label:"Entry Fee",onChange:A,value:I.entryFee,className:"form-control",touched:k.entryFee,error:B.entryFee})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(r.Z,{type:"time",name:"startTime",label:"Start Time",onChange:A,value:I.startTime,className:"form-control",touched:k.startTime,error:B.startTime})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(r.Z,{type:"number",name:"initialDepositFee",label:"Initial Deposit Fee",onChange:A,value:I.initialDepositFee,className:"form-control",touched:k.initialDepositFee,error:B.initialDepositFee})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(r.Z,{type:"number",name:"maxTeams",label:"Max Teams",onChange:A,value:I.maxTeams,className:"form-control",touched:k.maxTeams,error:B.maxTeams})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(d.Z,{name:"divisionStatus",options:[{value:"OPEN",label:"OPEN"},{value:"CLOSED",label:"CLOSED"},{value:"FULL",label:"FULL"}],deFaultValue:"Select Division Status",onChange:A,value:I.divisionStatus,label:"Division Status",className:"form-control",touched:k.divisionStatus,error:B.divisionStatus})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(r.Z,{type:"text",name:"prize1",label:"Prize 1",onChange:A,value:I.prize1,className:"form-control",touched:k.prize1,error:B.prize1})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(r.Z,{type:"text",name:"prize2",label:"Prize 2",onChange:A,value:I.prize2,className:"form-control",touched:k.prize2,error:B.prize2})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(r.Z,{type:"text",name:"prize3",label:"Prize 3",onChange:A,value:I.prize3,className:"form-control",touched:k.prize3,error:B.prize3})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(r.Z,{type:"text",name:"prize4",label:"Prize 4",onChange:A,value:I.prize4,className:"form-control",touched:k.prize4,error:B.prize4})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,v.jsx)(d.Z,{name:"tournamentId",deFaultValue:"Select Tournament",label:"Select Tournament",options:T,onChange:A,value:I.tournamentId,className:"form-control",touched:k.tournamentId,error:B.tournamentId})}),(0,v.jsx)("div",{className:"d-flex flex-column flex-grow-1"}),(0,v.jsx)("div",{className:"d-flex justify-content-center flex-grow-1 ",children:(0,v.jsx)("button",{type:"submit",className:"mt-3 gradient-btn-orange",children:z?(0,v.jsx)(f.Z,{}):"Submit"})})]})})]})})}},3486:function(e,a,t){var n=t(1413),o=t(5987),i=(t(2791),t(184)),r=["label","type","touched","value","error","className","labelClassName","min"];a.Z=function(e){var a=e.label,t=e.type,c=e.touched,l=e.value,s=e.error,u=e.className,d=e.labelClassName,p=e.min,m=(0,o.Z)(e,r),f="textarea"===t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{htmlFor:m.name,className:null!==d&&void 0!==d?d:"",children:a}),f?(0,i.jsx)("textarea",(0,n.Z)((0,n.Z)({},m),{},{value:null!==l&&void 0!==l?l:"",className:u,rows:4})):(0,i.jsx)("input",(0,n.Z)((0,n.Z)({},m),{},{value:null!==l&&void 0!==l?l:"",type:t,className:u,autoComplete:"off",min:"number"===t?0:p})),c&&s?(0,i.jsx)("p",{className:"text-danger",children:s}):null]})}},8923:function(e,a,t){t.d(a,{B0:function(){return N},IQ:function(){return y},Jf:function(){return x},Lw:function(){return h},NI:function(){return c},R$:function(){return S},dJ:function(){return s},fA:function(){return m},hC:function(){return z},ix:function(){return d},o4:function(){return Z},p0:function(){return u},qJ:function(){return f},ut:function(){return v},xJ:function(){return g},xT:function(){return p},yc:function(){return l}});var n=t(5531),o=t(5394),i=t(447),r="https://api.usmlsa.com/",c=function(e,a,t){return function(c){c({type:n.cS,payload:!0}),o.Z.post("".concat(r,"api/tournaments"),e,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){c({type:n.DI}),c({type:n.cS,payload:!1}),i.Z.success(e.data.message),t("/dashboard/alltournaments")})).catch((function(e){i.Z.error(e.data.message),c({type:n.cS,payload:!0})}))}},l=function(e){return function(a){a({type:n.cS,payload:!0}),o.Z.get("".concat(r,"api/tournaments?page=").concat(e,"&size=10")).then((function(e){a({type:n.yS,payload:e.data}),a({type:n.cS,payload:!1})})).catch((function(e){404===e.response.status&&a({type:n.yS,payload:[]}),a({type:n.cS,payload:!1})}))}},s=function(e){return function(a){o.Z.get("".concat(r,"api/tournaments/search?name=").concat(e.toLowerCase(),"&page=0&size=10")).then((function(e){a({type:n.yS,payload:e.data})})).catch((function(e){404===e.response.status&&a({type:n.yS,payload:[]})}))}},u=function(e){return function(a){a({type:n.cS,payload:!0}),o.Z.get("".concat(r,"api/tournaments/search?status=ACTIVE&page=0&size=10"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){a({type:n.dD,payload:e.data}),a({type:n.cS,payload:!1})})).catch((function(e){404===e.response.status&&a({type:n.dD,payload:[]}),a({type:n.cS,payload:!0})}))}},d=function(e,a){return function(a){a({type:n.cS,payload:!0}),o.Z.get("".concat(r,"api/tournaments/search?").concat(e.toString())).then((function(e){a({type:n.x_,payload:e.data}),a({type:n.cS,payload:!1})})).catch((function(e){console.log("\ud83d\ude80 ~ getTournamentsbyFilter ~ error:",e),a({type:n.x_,payload:[]}),a({type:n.cS,payload:!1})}))}},p=function(e){return function(a){a({type:n.cS,payload:!0}),o.Z.get("".concat(r,"api/tournaments/search?page=").concat(e,"&size=10")).then((function(e){a({type:n.x_,payload:e.data}),a({type:n.cS,payload:!1})})).catch((function(e){a({type:n.cS,payload:!1})}))}},m=function(e){return function(a){o.Z.get("".concat(r,"api/divisions/search?divisionName=").concat(e.toLowerCase(),"&page=0&size=10")).then((function(e){a({type:n.nr,payload:e.data})})).catch((function(e){console.log("\ud83d\ude80  getDivisionsbySearch  error:",e)}))}},f=function(e,a){return function(t){t({type:n.cS,payload:!0}),o.Z.get("".concat(r,"api/divisions?page=").concat(e,"&size=10"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){t({type:n.nr,payload:e.data}),t({type:n.cS,payload:!1})})).catch((function(e){400===e.response.status&&t({type:n.nr,payload:[]}),t({type:n.cS,payload:!1})}))}},v=function(e,a,t){return function(c){c({type:n.cS,payload:!0}),o.Z.delete("".concat(r,"api/divisions/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){c({type:n.Sh}),c({type:n.cS,payload:!1}),i.Z.success(e.data.message),t&&t()})).catch((function(e){c({type:n.cS,payload:!0}),i.Z.error(e.response.data.message)}))}},y=function(e,a){return function(t){t({type:n.cS,payload:!0}),o.Z.get("".concat(r,"api/divisions/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){t({type:n.iB,payload:e.data}),t({type:n.cS,payload:!1})})).catch((function(e){t({type:n.cS,payload:!1})}))}},h=function(e,a){return function(t){t({type:n.cS,payload:!0}),o.Z.get("".concat(r,"api/tournaments/").concat(e),{},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){var a;t({type:n.Qe,payload:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data}),t({type:n.cS,payload:!1})})).catch((function(e){t({type:n.cS,payload:!0})}))}},x=function(e,a,t){return function(c){o.Z.delete("".concat(r,"api/tournaments/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){c({type:n.Bo}),i.Z.success(e.data.message),t&&t()})).catch((function(e){i.Z.error(e.response.data.message)}))}},g=function(e,a,t,c){return function(l){o.Z.put("".concat(r,"api/tournaments/").concat(e),a,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){l({type:n.TL}),i.Z.success(e.data.message),c("/dashboard/alltournaments")})).catch((function(e){i.Z.error(e.response.data.message)}))}},S=function(e,a,t){return function(c){c({type:n.cS,payload:!0}),o.Z.post("".concat(r,"api/divisions"),e,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){c({type:n.Eu}),c({type:n.cS,payload:!1}),t("/dashboard/alldivisions"),i.Z.success(e.data.message)})).catch((function(e){i.Z.error(e.response.data.error),c({type:n.cS,payload:!1})}))}},z=function(e,a,t,c){return function(l){o.Z.put("".concat(r,"api/divisions/").concat(e),a,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){l({type:n.Eu}),c("/dashboard/alldivisions"),i.Z.success(e.data.message)})).catch((function(e){i.Z.error(e.response.data.message)}))}},Z=function(e,a,t){return function(c){var l=new FormData;l.append("file",t),console.log(l),c({type:n.cS,payload:!0}),o.Z.post("".concat(r,"api/tournaments/").concat(e,"/upload-picture"),l,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"}}).then((function(e){c({type:n.cS,payload:!1}),i.Z.success(e.data.message)})).catch((function(e){var a,t;i.Z.error((null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"An error occurred"),c({type:n.cS,payload:!1})}))}},N=function(e,a,t){return function(c){var l=new FormData;l.append("picture",t),c({type:n.cS,payload:!0}),o.Z.post("".concat(r,"api/divisions/").concat(e,"/upload-picture"),l,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"}}).then((function(e){c({type:n.cS,payload:!1}),i.Z.success(e.data.message)})).catch((function(e){var a,t;i.Z.error((null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"An error occurred"),c({type:n.cS,payload:!1})}))}}}}]);
//# sourceMappingURL=381.7094bf3e.chunk.js.map