"use strict";(self.webpackChunkusmlsa=self.webpackChunkusmlsa||[]).push([[95],{3486:function(e,a,t){var o=t(1413),n=t(5987),r=(t(2791),t(184)),l=["label","type","touched","value","error","className","labelClassName","min"];a.Z=function(e){var a=e.label,t=e.type,s=e.touched,c=e.value,i=e.error,d=e.className,u=e.labelClassName,m=e.min,p=(0,n.Z)(e,l),f="textarea"===t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:p.name,className:null!==u&&void 0!==u?u:"",children:a}),f?(0,r.jsx)("textarea",(0,o.Z)((0,o.Z)({},p),{},{value:null!==c&&void 0!==c?c:"",className:d,rows:4})):(0,r.jsx)("input",(0,o.Z)((0,o.Z)({},p),{},{value:null!==c&&void 0!==c?c:"",type:t,className:d,autoComplete:"off",min:"number"===t?0:m})),s&&i?(0,r.jsx)("p",{className:"text-danger",children:i}):null]})}},7095:function(e,a,t){t.r(a),t.d(a,{default:function(){return y}});var o=t(2791),n=t(3486),r=t(9434),l=t(9743),s=t(6008),c=t(171),i=t(5705),d=t(3589),u=t(6359),m=t(7689),p=t(9042),f=t(184),h=function(){var e,a=(0,r.I0)(),t=(0,r.v9)((function(e){return e.user})).user,h=(null===t||void 0===t?void 0:t.roles[0])||(null===t||void 0===t?void 0:t.role),y=(0,o.useContext)(p.C),v=y.UserEdit,x=y.UserId,N=(0,r.v9)((function(e){return e.person})).isLoading,g=null===t||void 0===t?void 0:t.access_token,b=(0,m.s0)(),Z=(0,i.TA)({initialValues:{email:"",role:"",firstName:"",lastName:"",mobilePhone:"",tournamentsPlayed:null,playerStatus:"",gamesPlayed:null,driverLicenseId:"",dateOfBirth:"",middleName:""},validationSchema:u.N,onSubmit:function(e,t){var o="";if(e.dateOfBirth){var n=new Date(e.dateOfBirth),r=n.getFullYear(),l=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");o="".concat(l,"/").concat(s,"/").concat(r)}var i={email:e.email,role:e.role,firstName:e.firstName,lastName:e.lastName,mobilePhone:e.mobilePhone,playerStatus:"INACTIVE",personAPlayer:"PLAYER"===(null===e||void 0===e?void 0:e.role),driverLicenseId:e.driverLicenseId,dateOfBirth:o,middleName:e.middleName};a(v?(0,c.D0)(i,x,g,b,h):(0,c.Hj)(i,g,b,h)),t.resetForm()}}),S=Z.values,j=Z.handleChange,w=Z.errors,A=Z.handleSubmit,C=Z.touched;Z.setValues;return e="ADMIN"===h?[{value:"CO_MANAGER",label:" CO MANAGER"},{value:"MANAGER",label:"MANAGER"},{value:"PLAYER",label:"PLAYER"}]:[{value:"CO_MANAGER",label:" CO MANAGER"},{value:"PLAYER",label:"PLAYER"}],(0,f.jsxs)("div",{className:"mt-3",children:[(0,f.jsx)("h2",{className:"mb-3 fw-bold",children:v?"Update User":"Add User"}),(0,f.jsxs)("form",{onSubmit:A,children:[(0,f.jsxs)(l.Z,{className:"row gy-3 row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-2",children:[(0,f.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,f.jsx)(n.Z,{type:"text",name:"firstName",label:"First Name",onChange:j,value:S.firstName,className:"form-control",touched:C.firstName,error:w.firstName})}),(0,f.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,f.jsx)(n.Z,{type:"text",name:"lastName",label:"Last Name",onChange:j,value:S.lastName,className:"form-control",touched:C.lastName,error:w.lastName})}),(0,f.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,f.jsx)(n.Z,{type:"text",name:"middleName",label:"Middle Name (Optional)",onChange:j,value:S.middleName,className:"form-control",touched:C.middleName,error:w.middleName})}),(0,f.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,f.jsx)(n.Z,{type:"email",name:"email",label:"Email",onChange:j,value:S.email,className:"form-control",touched:C.email,error:w.email})}),(0,f.jsx)("div",{className:"d-flex  flex-column flex-grow-1",children:(0,f.jsx)(s.Z,{options:e,className:"d-flex flex-grow-1  bg-white form-control  ",name:"role",label:"User Type",value:S.role,deFaultValue:"Select User Type",onChange:j,touched:C.role,error:w.role})}),(0,f.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,f.jsx)(n.Z,{type:"text",name:"mobilePhone",label:"Mobile Phone",onChange:j,value:S.mobilePhone,className:"form-control",touched:C.mobilePhone,error:w.mobilePhone})}),(0,f.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,f.jsx)(n.Z,{type:"date",name:"dateOfBirth",label:"Date of Birth",onChange:j,value:S.dateOfBirth,className:"form-control",touched:C.mobilePhone,error:w.dateOfBirth})}),(0,f.jsx)("div",{className:"d-flex flex-column flex-grow-1",children:(0,f.jsx)(n.Z,{type:"text",name:"driverLicenseId",label:"Driver License Id",onChange:j,value:S.driverLicenseId,className:"form-control",touched:C.driverLicenseId,error:w.driverLicenseId})})]}),(0,f.jsx)("div",{className:"d-flex justify-content-center ",children:(0,f.jsx)("button",{type:"submit",className:"mt-3 gradient-btn-orange",children:N?(0,f.jsx)(d.Z,{}):"Submit"})})]})]})},y=(0,t(3719).Z)((function(){return(0,f.jsx)(h,{})}))},171:function(e,a,t){t.d(a,{D0:function(){return c},Hj:function(){return s},PO:function(){return i},Z0:function(){return h},cj:function(){return m},dy:function(){return p},kN:function(){return u},tq:function(){return f},wN:function(){return d}});var o=t(2574),n=t(5394),r=t(447),l="https://api.usmlsa.com/",s=function(e,a,t,s){return function(c){c({type:o.cS,payload:!0}),n.Z.post("".concat(l,"api/persons/initial-registration"),e,{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e),c({type:o.CC}),c({type:o.cS,payload:!0}),t("ADMIN"===s?"/dashboard/allpersons":"/dashboard/allteams"),r.Z.success(e.data.message)})).catch((function(e){r.Z.error(e.message),c({type:o.cS,payload:!1})}))}},c=function(e,a,t,s){return function(c){c({type:o.cS,payload:!0}),n.Z.put("".concat(l,"api/persons/").concat(a),e,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){console.log(e),c({type:o.QE}),c({type:o.cS,payload:!0}),r.Z.success(e.data.message),s&&s()})).catch((function(e){var a;r.Z.success(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message),c({type:o.cS,payload:!1})}))}},i=function(e,a){return function(t){t({type:o.cS,payload:!0}),n.Z.get("".concat(l,"api/persons?page=").concat(e,"&size=10"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){console.log(e,"response"),t({type:o.yI,payload:e.data}),t({type:o.cS,payload:!1})})).catch((function(e){404===e.response.status&&t({type:o.yI,payload:[]}),t({type:o.cS,payload:!1})}))}},d=function(e,a){return function(t){n.Z.get("".concat(l,"api/persons/search?name=").concat(e.toLowerCase(),"&page=").concat(a,"&size=10")).then((function(e){t({type:o.yI,payload:e.data})})).catch((function(e){404===e.response.status&&t({type:o.yI,payload:[]})}))}},u=function(e,a){return function(t){t({type:o.cS,payload:!0}),n.Z.get("".concat(l,"api/persons/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){t({type:o.wC,payload:e.data}),t({type:o.cS,payload:!1})})).catch((function(e){t({type:o.cS,payload:!1})}))}},m=function(e,a,t){return function(s){s({type:o.cS,payload:!0}),n.Z.delete("".concat(l,"api/persons/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){s({type:o.pJ}),s({type:o.cS,payload:!1}),r.Z.success(e.data.message),t&&t()})).catch((function(e){s({type:o.cS,payload:!0}),r.Z.error(e.response.data.message)}))}},p=function(e,a){return function(t){t({type:o.cS,payload:!0}),n.Z.post("".concat(l,"api/persons/forgot-password?email=").concat(e),{}).then((function(e){console.log("\ud83d\ude80 : ~ file: actionsCreators.js:135 ~ .then ~ response",e),t({type:o.rv,payload:e.data}),t({type:o.cS,payload:!1}),a("/auth/reset-password"),r.Z.success(e.data.message)})).catch((function(e){r.Z.error(e.response.data.error),t({type:o.cS,payload:!1})}))}},f=function(e,a,t,s){return function(c){c({type:o.cS,payload:!0}),n.Z.post("".concat(l,"api/persons/reset-password?email=").concat(e,"&newPassword=").concat(a,"&token=").concat(t,"\n"),{}).then((function(e){console.log(e),c({type:o.Ew,payload:e.data}),c({type:o.cS,payload:!1}),r.Z.success(e.data.message),s("/auth/login")})).catch((function(e){r.Z.error(e.response.data.error),c({type:o.cS,payload:!1})}))}},h=function(e,a,t){return function(s){var c=new FormData;c.append("file",t),s({type:o.cS,payload:!0}),n.Z.post("".concat(l,"api/persons/").concat(e,"/upload-picture"),c,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"}}).then((function(e){s({type:o.cS,payload:!1}),r.Z.success(e.data.message)})).catch((function(e){var a,t;r.Z.error((null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"An error occurred"),s({type:o.cS,payload:!1})}))}}}}]);
//# sourceMappingURL=95.59ed35e7.chunk.js.map